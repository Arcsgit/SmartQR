<div class="container">
  <div class="header">
    <h1>Generate QR Code</h1>
    <p>Enter a URL or text to create a trackable QR code</p>
  </div>

  <div class="card">
    <form (ngSubmit)="generateQR()">
      <div class="form-group">
        <label for="data">
          URL
          <span class="required-badge">Required</span>
        </label>
        <input
          type="text"
          id="data"
          [(ngModel)]="data"
          name="data"
          placeholder="https://example.com or your text"
          [disabled]="loading()"
          required
        />
        <p class="help-text">Enter the destination URL or any text you want to encode</p>
      </div>

      <div class="form-group">
        <label for="name">
          Name 
          <span class="optional-badge">Optional</span>
        </label>
        <input
          type="text"
          id="name"
          [(ngModel)]="name"
          name="name"
          placeholder="e.g., Product Page, Contact Card"
          [disabled]="loading()"
          maxlength="100"
        />
        <p class="help-text">Give your QR code a friendly name for easy identification</p>
      </div>

      
      
      <button
        type="submit"
        [disabled]="loading() || !data().trim()"
        class="btn btn-primary btn-submit"
      >
        @if (loading()) {
          <svg class="spinner-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 12a9 9 0 1 1-6.219-8.56"/>
          </svg>
          Generating...
        } @else {
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="7" height="7" rx="1"/>
            <rect x="14" y="3" width="7" height="7" rx="1"/>
            <rect x="3" y="14" width="7" height="7" rx="1"/>
            <rect x="14" y="14" width="7" height="7" rx="1"/>
          </svg>
          Generate QR Code
        }
      </button>
    </form>
  </div>

  <!-- Result Section -->
  @if (qrResult()) 
  {
    <div class="result-card">
      <div class="result-header">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
          <polyline points="22 4 12 14.01 9 11.01"/>
        </svg>
        <h2>Your QR Code is Ready!</h2>
      </div>
      
      <div class="result-content">
        <!-- QR Code Image -->
        <div class="qr-display">
          <div class="qr-image-wrapper">
            <img [src]="qrResult()!.downloadUrl" alt="Generated QR Code" class="qr-image" />
          </div>
        </div>

        <!-- QR Code Information -->
        <div class="qr-info">
          <div class="info-section">
            <h3>QR Code Details</h3>
            
            <div class="info-item">
              <div class="info-label">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                  <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
                </svg>
                Scan URL (Trackable)
              </div>
              <div class="info-value-container">
                <code class="info-value">{{ qrResult()!.scanUrl }}</code>
              </div>
              <p class="info-description">This link tracks all scans</p>
            </div>
          </div>

          <!-- Action Buttons -->
          <div class="action-buttons">
            <button (click)="copyScanUrl()" class="btn btn-secondary btn-action">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
              </svg>
              Copy Scan URL
            </button>
            <button 
              (click)="downloadQR()" 
              [disabled]="downloading()"
              class="btn btn-primary btn-action"
            >
              @if (downloading()) {
                <svg class="spinner-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 12a9 9 0 1 1-6.219-8.56"/>
                </svg>
                Downloading...
              } @else {
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                  <polyline points="7 10 12 15 17 10"/>
                  <line x1="12" y1="15" x2="12" y2="3"/>
                </svg>
                Download Image
              }
            </button>
          </div>
        </div>
      </div>
    </div>
  }
</div>

